#!/bin/sh

# Create a new project
if [ $# -lt 2 ]; then
  echo "––––––––––––––––"
  echo "USAGE: create projectname [projecttype]"
  echo "Creates a new Project in pxwrk.de"
  echo "Possible project types:"
  echo "- html"
  echo "- kirby"
  echo "- wordpress"
  echo "- hoodie"
  echo "––––––––––––––––"
else
  cd ~/Cloud/server/pxwrk.de
  if [ "$2" == 'kirby' ]; then
    git clone --recursiv https://github.com/DerZyklop/boilerplate.pxwrk.de.git ./$1.pxwrk.de/submodules/boilerplate
    cd $1.pxwrk.de/
    cp -r submodules/boilerplate/ ./
    rm -r .git
    rm -r .gitignore
    rm -r .gitmodules
    rm -r assets/sass/sass-boilerplate/demo
    rm -r assets/sass/sass-boilerplate/Gruntfile.coffee
    rm -r assets/sass/sass-boilerplate/package.json
    rm -r assets/sass/sass-boilerplate/README.markdown

    sub kirby
    sub panel
    sub thumbs

  elif [ "$2" == 'wordpress' ]; then
    curl -o wordpress-2.6.1.tar.gz http://wordpress.org/latest.tar.gz
    tar -xzvf wordpress-2.6.1.tar.gz
    rm wordpress-2.6.1.tar.gz
    mv wordpress/ $1.pxwrk.de/
    cd $1.pxwrk.de/
  elif [ "$2" == 'hoodie' ]; then
    hoodie new $1.pxwrk.de
    cd $1.pxwrk.de/
    git clone --recursiv https://github.com/DerZyklop/boilerplate.pxwrk.de.git ./temp_www/
    mv temp_www/ www/
    cd www/
    rm -r assets/sass/sass-boilerplate/demo
    rm -r assets/sass/sass-boilerplate/Gruntfile.coffee
    rm -r assets/sass/sass-boilerplate/package.json
    rm -r assets/sass/sass-boilerplate/README.markdown
    hoodie start
  fi
  label 2 .
  npm install
  gi
  subl .
fi
